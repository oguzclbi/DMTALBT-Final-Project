<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EA Games | Sepetim</title>
    <link rel="icon" type="image/png" href="görseller/EA-Games.png">
    <style>
        body {
            background-color: #0c0c0c;
            color: #fff;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #00a3ff;
        }

        .button-row {
            text-align: center;
            margin-bottom: 25px;
        }

        button {
            background-color: #00a3ff;
            border: none;
            padding: 10px 25px;
            font-size: 1rem;
            font-weight: 700;
            border-radius: 10px;
            cursor: pointer;
            color: white;
            box-shadow: 0 0 10px #00a3ff;
            transition: background-color 0.3s ease;
            margin: 0 10px;
        }

        button:hover {
            background-color: #007acc;
        }

        .btn-clear {
            background-color: #ff5555;
            box-shadow: 0 0 10px #ff5555;
            margin-top: 20px;
            margin-left: 300px;
        }

        .btn-clear:hover {
            background-color: #cc4444;
        }

        .game-list {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .game-item {
            background-color: #141414;
            border-radius: 12px;
            display: flex;
            align-items: center;
            padding: 15px;
            box-shadow: 0 0 15px #00a3ff;
            gap: 15px;
        }

        .game-item img {
            width: 120px;
            height: 70px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .game-info {
            flex-grow: 1;
        }

        .game-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .game-price {
            font-size: 1.25rem;
            color: #00a3ff;
        }

        .empty-message {
            text-align: center;
            font-size: 1.3rem;
            color: #888;
            margin-top: 50px;
        }

        .btn-action {
            background-color: #28a745;
            box-shadow: 0 0 10px #28a745;
            font-size: 1rem;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            color: white;
            border: none;
            transition: background-color 0.3s ease;
        }

        .btn-action:hover {
            background-color: #1e7e34;
        }

        .btn-delete {
            background-color: #dc3545;
            box-shadow: 0 0 10px #dc3545;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            color: white;
            border: none;
            transition: background-color 0.3s ease;
            margin-left: 10px;
        }

        .btn-delete:hover {
            background-color: #b02a37;
        }

        .actions-wrapper {
            display: flex;
            gap: 8px;
        }
    </style>
</head>

<body>

    <div class="button-row">
        <button onclick="window.location.href='istek-listesi.html'">İstek Listesine Git</button>
        <button onclick="window.location.href='index.html'">Ana Sayfaya Dön</button>
    </div>

    <h1>Sepetim</h1>
    <div class="game-list" id="cartList">
        <!-- Sepet oyunları buraya gelecek -->
    </div>
    <button class="btn-clear" id="clearCart">Sepeti Temizle</button>

    <script>
        const games = {
            "oyun1": {
                title: "Commandos:Origins",
                price: "₺1.800",
                image: "görseller/commands.jpg"
            },
            "oyun2": {
                title: "Dead by Dylight",
                price: "₺180",
                image: "görseller/deadbydaylight.jpg"
            },
            "oyun3": {
                title: "Deadzone:Rogue",
                price: "₺359",
                image: "görseller/deadzone2.jpg"
            },
            "oyun4": {
                title: "Patron",
                price: "₺6,60",
                image: "görseller/patron.jpg"
            },
            "oyun5": {
                title: "Clair Obscur:Expedition 33",
                price: "₺820",
                image: "görseller/Clair-Obscur-Expedition-33.jpg"
            },
            "oyun6": {
                title: "Escape from Tarkov: Arena",
                price: "₺1.268",
                image: "görseller/arena2.jpg"
            },
            "oyun7": {
                title: "Destiny 2: Lightfall",
                price: "₺35,90",
                image: "görseller/destiny.jpg"
            },
            "oyun8": {
                title: "The Last of Us:PartII",
                price: "₺1.000",
                image: "görseller/lastof.jpg"
            },
            "oyun9": {
                title: "Farming Simulator 25",
                price: "₺549",
                image: "görseller/fs25.jpg"
            },
            "oyun10": {
                title: "Tank Head",
                price: "₺499",
                image: "görseller/tank.jpg"
            },
            "oyun11": {
                title: "Slient Hill 2",
                price: "₺1.132",
                image: "görseller/slienthill2.jpg"
            },
            "oyun12": {
                title: "Assassin's Creed Shadows",
                price: "₺1.749",
                image: "görseller/asssin2.jpg"
            },
            "oyun13": {
                title: "CarX Drift Racing Online",
                price: "₺115",
                image: "görseller/carx2.jpg"
            },
            "oyun14": {
                title: "EA SPORTS FC™ 25 Standart Sürüm",
                price: "₺2.599",
                image: "görseller/fc25.jpg"
            },
            "oyun15": {
                title: "Read Dead Redemption",
                price: "₺875",
                image: "görseller/readdead.jpg"
            }
        };

        const cartList = document.getElementById("cartList");
        const clearCartBtn = document.getElementById("clearCart");

        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        function renderCart() {
            cartList.innerHTML = "";

            if (cart.length === 0) {
                cartList.innerHTML = `<div class="empty-message">Sepetiniz boş.</div>`;
                clearCartBtn.style.display = "none";
                removeTotalPrice();
                return;
            }

            clearCartBtn.style.display = "block";

            let totalPrice = 0;

            cart.forEach(id => {
                if (!games[id]) return;

                const game = games[id];
                const div = document.createElement("div");
                div.className = "game-item";

                div.innerHTML = `
                    <img src="${game.image}" alt="${game.title}" />
                    <div class="game-info">
                        <div class="game-title">${game.title}</div>
                        <div class="game-price">${game.price}</div>
                    </div>
                    <div class="actions-wrapper">
                        <button class="btn-action" onclick="buyGame('${id}')">Satın Al</button>
                        <button class="btn-delete" onclick="removeFromCart('${id}')">Sil</button>
                    </div>
                `;

                cartList.appendChild(div);

                if (game.price.toLowerCase() !== "ücretsiz") {
                    const priceNumber = parseFloat(game.price.replace(/[₺\s\.]/g, "").replace(",", "."));
                    if (!isNaN(priceNumber)) {
                        totalPrice += priceNumber;
                    }
                }
            });

            showTotalPrice(totalPrice);
        }

        function showTotalPrice(amount) {
            let totalDiv = document.getElementById("totalPriceDiv");

            if (!totalDiv) {
                totalDiv = document.createElement("div");
                totalDiv.id = "totalPriceDiv";
                totalDiv.style.cssText = `
                    max-width: 900px;
                    margin: 20px auto 0;
                    font-size: 1.5rem;
                    font-weight: 700;
                    color: #00a3ff;
                    text-align: right;
                `;
                cartList.parentNode.insertBefore(totalDiv, clearCartBtn);
            }

            totalDiv.textContent = `Toplam: ₺${amount.toFixed(2)}`;
        }

        function removeTotalPrice() {
            const totalDiv = document.getElementById("totalPriceDiv");
            if (totalDiv) totalDiv.remove();
        }

        function buyGame(id) {
            // Oyun bilgilerini localStorage'a kaydet
            localStorage.setItem("selectedGame", JSON.stringify({
                id: id,
                title: games[id].title,
                price: games[id].price
            }));

            // Satın alma sayfasına git
            window.location.href = "satinal.html";
        }

        function removeFromCart(id) {
            cart = cart.filter(gameId => gameId !== id);
            localStorage.setItem("cart", JSON.stringify(cart));
            renderCart();
        }

        clearCartBtn.addEventListener("click", () => {
            if (confirm("Sepeti temizlemek istediğinize emin misiniz?")) {
                cart = [];
                localStorage.setItem("cart", JSON.stringify(cart));
                renderCart();
            }
        });

        renderCart();
    </script>
</body>

</html>